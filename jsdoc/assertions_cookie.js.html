<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: assertions/cookie.js</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a><iframe src="https://ghbtns.com/github-btn.html?user=dareid&repo=chakram&type=star&count=true" style="margin-top: 3px;" frameborder="0" scrolling="0" width="170px" height="20px"></iframe></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="module:chakram">
            <span class="title">
                <a href="module-chakram.html">module:chakram</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="module:chakram.all"><a href="module-chakram.html#.all">all</a></li>
            
                <li data-name="module:chakram.delete"><a href="module-chakram.html#.delete">delete</a></li>
            
                <li data-name="module:chakram.expect"><a href="module-chakram.html#.expect">expect</a></li>
            
                <li data-name="module:chakram.get"><a href="module-chakram.html#.get">get</a></li>
            
                <li data-name="module:chakram.head"><a href="module-chakram.html#.head">head</a></li>
            
                <li data-name="module:chakram.initialize"><a href="module-chakram.html#.initialize">initialize</a></li>
            
                <li data-name="module:chakram.options"><a href="module-chakram.html#.options">options</a></li>
            
                <li data-name="module:chakram.patch"><a href="module-chakram.html#.patch">patch</a></li>
            
                <li data-name="module:chakram.post"><a href="module-chakram.html#.post">post</a></li>
            
                <li data-name="module:chakram.put"><a href="module-chakram.html#.put">put</a></li>
            
                <li data-name="module:chakram.request"><a href="module-chakram.html#.request">request</a></li>
            
                <li data-name="module:chakram.wait"><a href="module-chakram.html#.wait">wait</a></li>
            
                <li data-name="module:chakram.waitFor"><a href="module-chakram.html#.waitFor">waitFor</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="module:chakram-expectation">
            <span class="title">
                <a href="module-chakram-expectation.html">module:chakram-expectation</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="module:chakram-expectation.cookie"><a href="module-chakram-expectation.html#.cookie">cookie</a></li>
            
                <li data-name="module:chakram-expectation.deflate"><a href="module-chakram-expectation.html#.deflate">deflate</a></li>
            
                <li data-name="module:chakram-expectation.gzip"><a href="module-chakram-expectation.html#.gzip">gzip</a></li>
            
                <li data-name="module:chakram-expectation.header"><a href="module-chakram-expectation.html#.header">header</a></li>
            
                <li data-name="module:chakram-expectation.json"><a href="module-chakram-expectation.html#.json">json</a></li>
            
                <li data-name="module:chakram-expectation.schema"><a href="module-chakram-expectation.html#.schema">schema</a></li>
            
                <li data-name="module:chakram-expectation.status"><a href="module-chakram-expectation.html#.status">status</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="global">
            <span class="title">
                <a href="global.html">global</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            <span class="subtitle">Typedefs</span>
            
                <li data-name="ChakramResponse"><a href="global.html#ChakramResponse">ChakramResponse</a></li>
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="assertions_cookie.js.html">Source: assertions/cookie.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>/**
Either checks that a cookie exists or ensures the cookie matches a given value
@alias module:chakram-expectation.cookie
@param {String} name - checks a cookie with this name exists
@param {String | RegExp} [value] - if specified, checks the cookie matches the given string or regular expression
@example 
it("should allow checking of HTTP cookies", function () {
    var response = chakram.get("http://httpbin.org/cookies/set?chakram=testval");
    expect(response).to.have.cookie('chakram');
    expect(response).to.have.cookie('chakram', 'testval');
    expect(response).to.have.cookie('chakram', /val/);
    return chakram.wait();
});
 */
module.exports = function (chai, utils) {

    var getCookie = function (jar, url, key) {
        var cookies = jar.getCookies(url);
        for(var ct = 0; ct &lt; cookies.length; ct++) {
            if(cookies[ct].key === key) {
                return cookies[ct];
            }
        }
        return null;
    };
    
    var getCookieValue = function (jar, url, key) {
        var cookie = getCookie(jar, url, key);
        return (cookie === null ? null : cookie.value);
    };
    
    utils.addMethod(chai.Assertion.prototype, 'cookie', function (key, value) {
        var cookieValue = getCookieValue(this._obj.jar, this._obj.url, key);
        if(arguments.length === 1) {
            this.assert(
                cookieValue !== undefined &amp;&amp; cookieValue !== null, 
                'expected cookie '+ key +' to exist', 
                'expected cookie '+ key +' not to exist'
            );
        } else if (value instanceof RegExp) {
            this.assert(
                value.test(cookieValue),
                'expected cookie '+ key + ' with value ' + cookieValue + ' to match regex '+value,
                'expected cookie '+ key + ' with value ' + cookieValue + ' not to match regex '+value
            );
        } else {
            this.assert(
                cookieValue === value,
                'expected cookie '+ key + ' with value ' + cookieValue + ' to match '+value,
                'expected cookie '+ key + ' with value ' + cookieValue + ' not to match '+value
            );
        }
    });
};</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta3</a> on Sat May 02 2015 20:18:27 GMT+0100 (BST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
